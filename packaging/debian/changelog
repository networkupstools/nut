nut (2.2.2-1) UNRELEASED; urgency=low

  * New upstream release (Closes: #471828, #462468, #334105, #463150)
  * acknowledges NMUs (Closes: #469855)
  * debian/control:
    - add the new nut-xml package and its libneon dependency
    - add the new libupsclient1 and libupsclient1-dev packages, with the latter
      replacing nut-dev (Closes: #419684)
  * debian/rules: update according to upstream changes
    - replace --with-lib by --with-dev
    - update HAL integration
    - update for the nut-xml package
    - distribute the shared version of libupsclient
  * debian/nut.postinst, debian/nut-hal-drivers.postinst: use udevtrigger to
    refresh the devices permissions (Closes: #469601, #475262)

 -- Arnaud Quette <aquette@debian.org>  Tue, 22 Apr 2008 13:31:31 +0200

nut (2.2.1-2.1) unstable; urgency=low

  * Non-maintainer upload.
  * Skip udev restart logic within chroots, closes: #469855.

 -- Joe Nahmias <jello@debian.org>  Sun, 09 Mar 2008 13:12:12 -0400

nut (2.2.1-2) unstable; urgency=low

  * debian/po/de.po: update the German po-debconf translation (Closes:
    #464466)
  * nut-hal-drivers.preinst: created to add to HAL user to the NUT group
    (Closes: #460392)
  * debian/nut-hal-drivers.postinst: created to complete the above by
    restarting udev after the rules file installation
  * debian/changelog: Fix some Lintian reports (syntax and spelling errors)
  * debian/nut.README.Debian: completed a bit more for #334105

 -- Arnaud Quette <aquette@debian.org>  Fri,  8 Feb 2008 13:48:23 +0100
 
nut (2.2.1-1) unstable; urgency=low

  * New upstream release (Closes: #439986)
  * acknowledges NMUs (Closes: #447961, #445000)
  * debian/watch: update the URL to point the 2.2 tree
  * debian/rules:
    - force --udev-dir to remove udev from Build-Depends while
      keeping the feature (complete #447961 fix)
    - limit the above fix to linux systems not to break build on
      bsd and hurd these architectures (Closes: #460732)
    - fix lintian debian-rules-ignores-make-clean-error and do some more
      cleanup
    - remove the empty directories /usr/{include,lib} from the nut package
  * debian/nut.postinst: call invoke-rc.d instead of the udev init script
    (Closes: #442331)
  * debian/control:
    - remove udev from Build-Depends
    - update Standards-Version to 3.7.3
    - remove Homepage from description and add it as a tag
    - add libsnmp-dev as an alternate Build-Depends to libsnmp9-dev
  * debian/po/nl.po: update the Dutch po-debconf translation (Closes: #447720)
  * debian/po/fr.po: update the French po-debconf translation (Closes: #442102)
  * debian/patches/*: removed since these have been applied upstream
  * debian/patches/00list: emptied but kept for future use

 -- Arnaud Quette <aquette@debian.org>  Wed, 23 Jan 2008 17:13:13 +0100

nut (2.2.0-2.1) unstable; urgency=low

  * Non-maintainer upload with Arnaud's permission.
  * debian/nut.postinst: restart udev only if it is running already
    (Closes: #447961).
  * debian/nut.preinst: ignore db_get errors for nut/remove_debian_conf,
    thanks to Alexander Gerasiov for the patch (Closes: #445000).
  * Fixed typo in the date of the 2.2.0-2 changelog entry (Augl -> Aug).

 -- Sebastian Harl <sh@tokkee.org>  Tue,  8 Jan 2008 13:50:11 +0100

nut (2.2.0-2) unstable; urgency=low

  * debian/control: list udev as Build-Depends to allow the udev rules
    inclusion (Closes: #437811)
  * debian/nut.default: fix a typo error on UPSMON options comment (Closes:
    #439407)
  * debian/po/:
    - add Brazilian Portuguese debconf templates translation (Closes:
      #439793)
    - update Portuguese debconf templates translation (Closes: 440369)
    - update French debconf templates translation (Closes: 440524)
  * debian/Makefile.am: update with the missing files
  * debian/patches/03_libupsclient-config.dpatch: patch for the missing FLAGS
    (Closes: #439985)

 -- Arnaud Quette <aquette@debian.org>  Wed, 29 Aug 2007 16:14:11 +0200

nut (2.2.0-1) unstable; urgency=low

  * New upstream release (Closes: #432909, #420016, #426033)
  * debian/control:
    - merge the nut-usb package into nut, and update the various needed
      fields (Depends, Provides, Conflicts, Suggests and Description)
    - requires at least libhal-dev  0.5.8
    - complete the nut-hal-drivers Description (Homepage)
    - update to policy 3.7.2
    - add po-debconf to Build-Depends
  * debian/rules:
    - general rewrite since the upstream now use automake
    - force the evaluation of DEB_HOST_ARCH_OS for dh_gencontrol
    - force udev to empty on non Linux system, for dh_gencontrol
    - remove the DH_COMPAT export
    - update the nut-usb specifics, not needed anymore
    - nut-hal-drivers also needs the udev rules
    - call debconf-updatepo to clean debconf translations
  * debian/compat: creation
  * debian/nut-usb.*: remove these files, and put the content in the
    matching nut.* files
  * debian/nut.preinst: remove the old udev rule file (025_nut...) which
    was manually installed, and now addressed upstream and called 52_nut.
  * debian/nut.postinst: restart udev to apply the USB rules to the
    already plugged devices
  * debian/nut-hal-drivers.preinst: created to add the HAL user to
    the nut group
  * debian/po/nl.po: added Dutch po-debconf translation (Closes: #414756)
  * debian/po/pt.po: added Portuguese po-debconf translation (Closes: #415189)
  * debian/patches/01_udev_rules_subsystem_usb.dpatch: update the patch
  * debian/patches/02_libupsclient.dpatch: patch for the missing FLAGS
  * debian/nut.templates: rewrite and simplification
  * debian/nut.config: rewrite and simplification
  * debian/rules: call dh_installinit with the priority set to 50 to (Closes:
    #385694)
  * debian/nut.default, debian/nut.init: allow to specify options for upsd and
    upsmon (Closes: #420020, #434503)

 -- Arnaud Quette <aquette@debian.org>  Tue, 17 Jul 2007 09:14:11 +0200
 
nut (2.0.5-3) unstable; urgency=low

  * debian/patches/01_udev_rules_subsystem_usb.dpatch: rework that
  patch to be more generic

 -- Arnaud Quette <aquette@debian.org>  Fri, 02 Feb 2007 15:38:59 +0100

nut (2.0.5-2) unstable; urgency=low

  * debian/patches/*: add a patch to fix the udev rule SUBSYSTEM from
    usb_device to usb (thanks to Joey Hess) (Closes: #409080)
  * debian/control:
    - replace the udev substvar by udev
    - nut Conflicts with nut-{usb,snmps} <= 2.0.4 and nut-{usb,snmp}
    Depends upon 2.0.5 (Closes: #407882)
  * debian/rules: dh_gencontrol no more calls -V for udev

 -- Arnaud Quette <aquette@debian.org>  Thu, 01 Feb 2007 14:50:49 +0100

nut (2.0.5-1) unstable; urgency=low

  * New upstream release (Closes: #406045, #380304, #399741)
  * debian/rules:
    - replaces CHANGES by ChangeLog
    - replace the dummycons installation by dummy-ups
    - integrate the --with-htmlpath option
  * debian/nut-cgi.docs: created to install data/html/README
  * debian/nut.init: LSB compliance update
  * debian/control: add lsb-base (>= 3.0-6) to Depends for LSB compliance

 -- Arnaud Quette <aquette@debian.org>  Tue, 16 Jan 2007 10:42:36 +0100

nut (2.0.4-3) unstable; urgency=high

  * acknowledges NMUs (Closes: #396704, #389350)
  * debian/nut-usb.postinst: remove the symlinking of the udev file since it's
    not useful anymore (Closes: #400215)
  * native udev rules are now used (Closes: #359802, #380304)
  * debian/po/de.po: add German po-debconf template translation (Closes:
    #400285)
  * debian/nut.config: change the medium priorities to high (Closes: #388945)
  * debian/nut.init: improve drivers startup report

 -- Arnaud Quette <aquette@debian.org>  Wed, 20 Dec 2006 11:07:30 +0100

nut (2.0.4-2.3) unstable; urgency=high

  * Non-maintainer upload.
  * Some polish on top of the previous NMU.
    * Remove the hotplug alternative; we no longer support it, so it's no
      longer acceptable in place of udev. Correspondingly, rename the
      substvar to ${udev}. (Closes: #396704)
    * Drop debian/nut-usbups.rules and use upstream's rules instead. Modify
      debian/rules correspondigly, patch from Arnaud Quette.

 -- Steinar H. Gunderson <sesse@debian.org>  Fri, 17 Nov 2006 01:12:54 +0100

nut (2.0.4-2.2) unstable; urgency=high

  * Non-maintainer upload.
  * In the udev script, replace the RUN actions by MODE and GROUP actions, as
    per suggestion from the maintainer; should fix permission issues.
    (Closes: #396704)

 -- Steinar H. Gunderson <sesse@debian.org>  Thu, 16 Nov 2006 15:38:43 +0100

nut (2.0.4-2.1) unstable; urgency=low

  * NMU
  * not removing nut user on purge (Closes: #389350)

 -- Florian M. Weps <fmw@debian.org>  Thu, 12 Oct 2006 11:19:37 +0200
 
nut (2.0.4-2) unstable; urgency=low

  * debian/rules: replace $PWD by CURDIR to satisfy buildd
  * debian/nut.default, debian/nut.init: make the bug 358696 workaround 
    optional as it might be dangerous under some circumstances (closes:
    #358696)

 -- Arnaud Quette <aquette@debian.org>  Tue, 01 Aug 2006 08:50:26 +0200

nut (2.0.4-1) unstable; urgency=low

  * New upstream release
    - driver do not use /var anymore when called for shutdown/poweroff
    (closes: #332846)
    - fixes the newhidups crash upon device reconnexion (closes: #354305,
    #359769)
  * debian/nut.preinst: syntax enhancement to avoid issue when the nut user
    already exists (closes: #378970)
  * debian/nut-cgi.postinst: fix wrong permissions (closes: #378818)
  * debian/po/cs.po: update Czech translation of nut debconf messages (closes:
    #366738)
  * debian/nut.default, debian/nut.init: "poweroff" workaround to deal with
    BIOS default of "On/Off state: Last state" and system halting itself
    before the UPS cuts power (closes: #358696)
  * debian/nut-usbups.rules: fix the broken udev rules (closes: #359801)

 -- Arnaud Quette <aquette@debian.org>  Thu, 27 Jul 2006 15:20:46 +0200

nut (2.0.3-4) unstable; urgency=low

  * debian/nut-usb.postinst: generate the /etc/udev/rules/ file
  * debian/rules:
    - install the right udev rule file (not the upstream one)
    - install the debian/hotplug file as libhidups, as it's compatible
    with hotplug and udev styles

 -- Arnaud Quette <aquette@debian.org>  Mon, 13 Mar 2006 08:52:25 +0100
 
nut (2.0.3-3) unstable; urgency=low

  * debian/rules:
    - fix a wrong symlink for the udev rule files (closes: #354262)
    - add a temporary workaround to clean drivers/tripplite_usb

 -- Arnaud Quette <aquette@debian.org>  Mon, 27 Feb 2006 15:35:32 +0100
 
nut (2.0.3-2) unstable; urgency=low

  * debian/nut.init: fix the creation of the PID directory, as /var is now volative.
    This bug has been identified in Ubuntu (Launchpad #6679)
  * debian/nut-cgi.postrm: suppress the deletion of the nut user as it's not
    needed (closes: #319395)
  * debian/nut-cgi.preinst: suppress that file as we do not need to check and create
    the nut user and group for nut-cgi
  * debian/nut-cgi.postinst: enhanced to ensure the /etc/nut directory and nut-cgi
    configuration files are readable by others
  * debian/nut-cgi.README.Debian: improve the documentation about configuration
    files permissions

 -- Arnaud Quette <aquette@debian.org>  Fri, 24 Feb 2006 10:05:25 +0100

nut (2.0.3-1) unstable; urgency=low

  * New upstream release
    - include the improved USB driver (closes: #300115)
    - fix mge-utalk regression (closes: #315431)
    - fix USB device claiming and logging (closes: #322901)
  * debian/nut-cgi.config: complete the typo fixes from 2.0.2-1 and remove exit
    calls (closes: #308215)
  * debian/nut.config: remove exit calls
  * debian/hotplug: add this file to manage hotplug and udev style permissions settings
  * debian/nut-usbups.rules: embed a modified version of the upstream file
  * debian/control:
    - make hotplug | udev Depends conditionnal, from rules
    - remove libusb-0.1-4 Depends as it is already listed with shlibs:Depends
  * debian/rules:
    - generate debian/control Depends for hotplug | udev
    - also install udev files (closes: #338738, #332939)
    - call the clean rule before distclean
  * debian/nut.README.Debian:
    - update the Installation ยง2 to reflect udev changes on serial port permissions.
    Users need to manually add the nut group to the dialout group (closes: #325878,
    #334105)
    - some other minor update

 -- Arnaud Quette <aquette@debian.org>  Tue, 21 Feb 2006 13:57:35 +0100

nut (2.0.2-2) unstable; urgency=low

  * debian/nut-cgi.postinst: load confmodule
  * debian/nut-hidups/*: remove this unneeded directory
  * debian/control:
    - Update build dependency from libsnmp5-dev to libsnmp9-dev (closes:
    #326410)
    - Changes nut-usb wrong dependency from libusb-dev to libusb-0.1-4 (closes:
    #320315)
    - add debconf (>= 0.5.00) and adduser to nut/nut-cgi Depends
  * debian/copyright: update the FSF address and the Authors
  * debian/po/vi.po: add the Vietnamese translation for debconf, from Clytie
    Siddall ((closes: #316327)

 -- Arnaud Quette <aquette@debian.org>  Fri, 07 Oct 2005 23:35:55 +0200

nut (2.0.2-1) unstable; urgency=low

  * New upstream release:
    - build respect LDFLAGS (closes: #265439)
    - fix etapro brokeness (closes: #305730)
    - fix shutdown/restart problems with mge-shut (closes: #302190)
    - fix mge-utalk support for older units (closes: #315431)
  * debian/po/fr.po: update the French debconf templates, thanks to Michel
    Grentzinger (closes: #306541)
  * debian/rules:
    - install hotplug files for the newhidups USB driver
    - suppress the snmp-ups.8 manpage workaround
  * debian/nut-usb.prerm: created to remove hotplug files
  * debian/control:
    - add hotplug Depends for nut-usb
    - upgrade Debian Policy to 3.6.2
  * debian/patches/*: remove all patch and empty 00list as all has
    been fixed upstream
  * debian/nut-cgi.config: integrate the typo fixes that was blocking
    upgrade from woody to sarge
  * debian/nut-cgi.preinst: remove an unneeded blank line
  * acknowledge NMU from Craig Small (closes: #302189)

 -- Arnaud Quette <aquette@debian.org>  Mon, 27 Jun 2005 11:29:52 +0200

nut (2.0.1-3) unstable; urgency=low

  * debian/patches/01_cleanSourceFromlibupsclient.dpatch: removed as it
    has been fixed upstream in 2.0.1
  * debian/patches/00list: re enabled for the below patch
  * debian/patches/01_upsstatsCgiNoHostCrash.dpatch: added while waiting
    for the upstream fix (closes: #302902)
  * debian/nut-cgi.templates: added nut-cgi/major_template_changes
  * debian/nut-cgi.config: use nut-cgi/major_template_changes (closes:
    #301184)
  * debian/nut-cgi.README.Debian: reworked, and mention upgrade and
    installation.
  * debian/nut.README.Debian: mention the missing UPGRADING file, and complete
    the upsmon.conf lines with the mandatory POWERDOWNFLAG and SHUTDOWNCMD
    (closes: #302182)
  * debian/nut.templates: add nut/2_0_upstream_changes to deal with the new
    changes
  * debian/nut.config: use the above nut/2_0_upstream_changes (closes:
    #301060)
  
 -- Arnaud Quette <aquette@debian.org>  Fri, 15 Apr 2005 13:52:32 +0100
  
nut (2.0.1-2.1) unstable; urgency=low

  * Non-maintainer upload
  * NUT nows powersdown Closes: #302189

 -- Craig Small <csmall@debian.org>  Thu,  7 Apr 2005 11:47:58 +1000
 
nut (2.0.1-2) unstable; urgency=low

  * debian/control: add missing Build-Depends for dpatch, thanks to Kurt
    Roeckx (closes: #298218)

 -- Arnaud Quette <aquette@debian.org>  Mon, 07 Mar 2005 16:29:32 +0100

nut (2. 0.1-1) unstable; urgency=low

  * New upstream release (closes: #247671, #283539)
  * debian/watch: update URL to match the current 2.0 stable tree
  * debian/rules:
    - change install-misc target to install-lib following the upstream rule
    name change
    - error reporting enhancements, thanks to Karl Shaul (inserted a set -e at
    the start of every for loop ; from Debian Policy ยง4.5).
    - workaround to include dummycons test driver and its manpage in nut-dev
    while waiting for an upstream rule
    - workaround to remove snmp-ups manpage from the nut package, to avoid a
    file conflict with nut-snmp, while waiting for an upstream rule
    - remove the workaround from 1.4.2-2 to suppress libupsclient.a and
    newhidups upon make clean
    - comment the "conf files workaround" as it's no more needed
  * debian/control: 
    - add nut-dev to nut Suggests
    - complete nut-dev to include dummycons testing driver
    - add libusb (>= 0.1.8) nut-usb Depends to benefit of the kernel driver
    unbind feature (needed for USB models other than MGE UPSs)
    - suppress libgd1 from Build-Depends to fix a DebCheck warning, as it
    is listed in Section oldlibs
  * debian/nut.README.Debian: add a section "(3) /etc/nut/upsd.conf"
    and add references to sample config files and UPGRADING information
    (closes: #269485)
  * debian/nut.TODO.Debian: add this file to track planned and unfinished
    tasks
  * debian/nut-cgi.README.Debian: improve a bit the text
  * debian/nut.init: test powerdown flag (upsmon -K) and use the new
    upsdrvctl exit codes (thanks to Karl Shaul)
  * debian/po/cs.po: add Czech translation of debconf templates (patch from
      Miroslav Kure) (closes: #283225)
  * debian/patches: add basic infrastructure for dpatch
 
 -- Arnaud Quette <aquette@debian.org>  Fri, 04 Mar 2005 11:40:13 +0100

nut (1.4.3-2) unstable; urgency=low

  * debian/control: add nut-dev package with NUT lib and headers (closes:
    #263937)
  * debian/rules: change install-misc for the above nut-dev.
  * debian/control: invert apache and httpd in nut-cgi Recommends to solve a
    lintian warning

 -- Arnaud Quette <aquette@debian.org>  Sun, 08 Aug 2004 16:07:04 +0200

nut (1.4.3-1) unstable; urgency=low

  * New upstream release
  * debian/control: change Homepage URL to "www" instead of "random" and
    remove trailing slash / dot (closes: #254084)
  * debian/control: add apache to nut-cgi Recommends to have a non-virtual
    package alternative 

 -- Arnaud Quette <aquette@debian.org>  Thu, 29 Jul 2004 22:58:03 +0200

nut (1.4.2-3) unstable; urgency=low

  * debian/control: add libusb-dev version in Build-Depends (closes: #248952)
  * debian/copyright: update upstream URL and copyright owners (closes:
    #242422)
  * debian/po/ca.po: add Catalan translation of debconf templates (patch from
    Aleix Badia i Bosch) (closes: #248741)
  * debian/nut-cgi.README.Debian: added to describe nut-cgi configuration
    (thanks to Marius Gedminas) (closes: #249825)
  * debian/nut.README.Debian: minor change

 -- Arnaud Quette <aquette@debian.org>  Fri, 28 May 2004 13:10:01 +0200
 
nut (1.4.2-2) unstable; urgency=low

  * debian/control: add libusb-dev to Build-Depends (closes: #240586) 
  * debian/rules: workaround to clean libupsclient.a and newhidups (complete
    the above)

 -- Arnaud Quette <aquette@debian.org>  Sun, 28 Mar 2004 18:30:01 +0100
 
nut (1.4.2-1) unstable; urgency=low

  * New upstream release
    * Fixes mge-shut settings and shutdown problems (closes: #232402, #234037)
  * debian/nut.init: fixes powerdown rule to prevent from forced UPS shutoff 
    upon normal shutdown, and add a warning when POWERDOWN flags isn't
    defined, thanks to Loic Le Loarer (closes: #236092)
  * debian/control: update nut-usb Description to reflect the add of newhidups
    and energizerups drivers.
  * debian/rules: update nut-usb build and install rules to match the new ones
 
 -- Arnaud Quette <aquette@debian.org>  Thu, 25 Mar 2004 16:30:01 +0100

nut (1.4.1-release-2) unstable; urgency=low

  * recall previously malformed closed bug (closes: #227965, #227964)
  * debian/control: Build-Depends to allow libgd*-noxpm (closes: #231153)
  * debian/control: update Homepage address
  * debian/watch: update target address

 -- Arnaud Quette <aquette@debian.org>  Thu, 05 Feb 2004 19:19:56 +0100

nut (1.4.1-release-1) unstable; urgency=low

  * New upstream release
  * debian/po/*: add gettext support for debconf templates (patch from Michel
    Grentzinger) (Close: #227965)
  * debian/po/fr.po: add French translation of debconf templates (patch from
    Michel Grentzinger) (Close: #227964)

 -- Arnaud Quette <aquette@debian.org>  Sun, 18 Jan 2004 21:19:56 +0100

nut (1.4.1-pre3-5) unstable; urgency=low

  * debian/nut.postrm: fix inverted test with -z (fix a purge error)
  * debian/nut.postrm: same as above
  * debian/nut.postrm: suppress check_and_delete_group() as it is not useful
  * debian/nut-cgi.postrm: same as above
  * debian/nut.postinst: test if /etc/nut exists before chmod'ing (fix an
    install error)

 -- Arnaud Quette <aquette@debian.org>  Sat,  15 Nov 2003 22:10:23 +0100

nut (1.4.1-pre3-4) unstable; urgency=low

  * debian/nut.preinst: wider check for user/group creation (closes: #217980)
  * debian/nut.postrm: rework purge rule for user/group deletion (2nd part of
    the above fix)
  * debian/nut-cgi.postrm: rework purge rule for user/group deletion (2nd part of
    the above fix)
  * debian/nut-cgi.preinst: wider check for user/group creation (same as
    above)
  * debian/rules: suppress {nut,nut-cgi}/etc/nut/*.sample that were wrongly
    installed (linked to #172217)
  * debian/nut.examples: created to complete above fix
  * debian/nut-cgi.examples: created to complete above fix
  * debian/nut.postrm: suppress /etc/nut/*.sample file (to correct above
    problem)
  * debian/nut-cgi.postrm: suppress /etc/nut/*.sample file (same as above)
  * Maintainer upload (forgotten previously), closes: #200182, #203061 
  
 -- Arnaud Quette <aquette@debian.org>  Sat,  15 Nov 2003 10:10:23 +0100

nut (1.4.1-pre3-3) unstable; urgency=low

  * clients/Makefile.in: install parseconf.h to fix compilation error with wmnut
  * man/Makefile.in: fix a broken upstream rule (hidups manpages installed two
    times) that prevent from installing nut-usb package. This will be fixed in
    the next upstream
  
 -- Arnaud Quette <aquette@debian.org>  Mon,  10 Nov 2003 17:10:23 +0100

nut (1.4.1-pre3-2) unstable; urgency=low

  * man/Makefile.in: fix a broken upstream rule (powernet and snmp-ups
    manpages installed two times) that prevent from installing nut-snmp package
  
 -- Arnaud Quette <aquette@debian.org>  Mon,  10 Nov 2003 12:59:23 +0100
 
nut (1.4.1-pre3-1) unstable; urgency=low

  * New upstream release
  * clients/Makefile.in: suppress the one line patch to install parseconf.o
    (from 1.4.1-pre2-1). This is now cleanly addressed by the upstream source
    by installing libupsclient.a (closes: #216496)
  * debian/rules: change dh_shlibdeps's exclude from upsfetch.o to libupsclient.a
  * debian/nut.preinst: fix install rule to catch all cases of nut user and group
    needed creation. Previously, post purge install case was not (closes: #217980)
  * debian/rules: suppress the work-around for nut-usb package following
    the upstream correction (from 1.4.1-pre1-2)
  * debian/control: Final package take over ; switch Luca Filipozzi as
    co maintainer, and Arnaud Quette as new maintainer.
  * debian/watch: point the authoritative download server (penguin.harrison)
    and stable releases ("nut/release/1.4/" directory ; it won't work for
    final 1.4.1, but for 1.4.2)
  * debian/nut.postrm: rework purge rule to suppress a warning

 -- Arnaud Quette <aquette@debian.org>  Sat,  8 Nov 2003 12:15:23 +0100

nut (1.4.1-pre2-1) unstable; urgency=low

  * New upstream release
  * debian/control: created package nut-usb for finer deps management
  * debian/rules: added rules for nut-usb package, and a work-around
    for install directories creation while waiting for upstream correction.
  * drivers/Makefile.in: suppressed hidups from PROGS, thanks to the above
  * debian/control: repeat Homepage for every sub-package
  * debian/control: completed nut Suggests
  * debian/control: changed Arnaud Quette address to the good Debian one
  * debian/rules: suppress the work-around for nut-snmp package following
    the upstream correction(from 1.4.1-pre1-1)
  * debian/nut-cgi.preinst: always test if nut user exist as nut-cgi
    can be installed without nut, so not having nut user created (closes:
    Bug#213730)
  * debian/nut-cgi.postinst: chown root:nut to address a potential security
    issue (see 1.2.1-2)
  * clients/Makefile.in: one line patch to install parseconf.o. This solve
    a problem with wmnut package (can't build anymore due to unresolved
    symbols). This point will be more cleanly address in next upstream

 -- Arnaud Quette <aquette@debian.org>  Sat, 18 Oct 2003 09:05:01 +0200

nut (1.4.1-pre1-2) unstable; urgency=low

  * debian/control: rewrotte descriptions to follow Debian Policy. A
    further enhancement will be to use debian/nut.substvars (thanks
    to Shaul Karl) (closes: Bug#209569)
  * drivers/Makefile.in: added back hidups to PROGS (closes: Bug#208248)
  * debian/control: added libgd2-* to Build-Depends to allow more choices
  * debian/control: added Shaul Karl as co-maintainer
  * debian/control: changed Arnaud Quette address to Debian's one

 -- Arnaud Quette <arnaud.quette@debian.org>  Sun, 14 Sep 2003 12:11:45 +0200

nut (1.4.1-pre1-1) unstable; urgency=low

  * New upstream release (closes: Bug#203856)
  * recall ignored 1.4.0-2 changes (closes: Bug#204193, Bug#199895)
  * debian/nut.preinst: already solved bug in 1.4.0-3 (closes:Bug#206229)
  * debian/control: created package nut-snmp (closes: Bug#195645)
  * debian/rules: added rules for nut-snmp package, and a work-around
    for install directories creation while waiting for upstream correction.
  * debian/control: change Build-Depends to "libgd-xpm-dev | libgd-dev" to
    allow easy woody backport (thanks to Martin Maney)
  * debian/nut.prerm: wait for upsd stop before calling the remove tempo

 -- Arnaud Quette <arnaud.quette@free.fr>  Sat, 23 Aug 2003 13:55:32 +0200

nut (1.4.0-3) unstable; urgency=low

  * debian/nut.prerm: fix a post removal warning by adding a tempo
    (1 sec) before removing /var/run/nut
  * debian/nut.preinst: reworked install rule (thanks Shaul) (closes:Bug#204153)

 -- Arnaud Quette <arnaud.quette@free.fr>  Fri,  8 Aug 2003 23:14:26 +0200

nut (1.4.0-2) unstable; urgency=low

  * debian/watch: update URL to point NUT 1.4 (thanks to Shaul Karl)
  * debian/nut.dirs: add /var/run/nut (thanks Shaul) (closes: Bug#204193)
  * debian/nut-cgi.preinst: created for allowing separate installation 
    (without nut) (closes: Bug#199895)
  * debian/rules: remove the "--with-group=nut" call to configure as it
    is obsolete (thanks Shaul)
  * debian/control: add Arnaud Quette as co-maintainer

 -- Arnaud Quette <arnaud.quette@free.fr>  Thu,  7 Aug 2003 20:14:26 +0200

nut (1.4.0-1) unstable; urgency=low

  * New upstream release (closes: Bug#203061)
  * debian/nut.init: change Init-script ordering (start_stop_server) to
    address data stale warning (closes: Bug#200182)

 -- Arnaud Quette <arnaud.quette@free.fr>  Fri,  1 Aug 2003 18:42:22 +0200

nut (1.2.2-1) unstable; urgency=low

  * New upstream release
  * debian/rules: gidNumber of group 'nobody' is 65534 not 65535
    (thanks Shaul) (closes: Bug#180532)

 -- Luca Filipozzi <lfilipoz@debian.org>  Fri, 18 Apr 2003 20:12:17 -0700

nut (1.2.1-2) unstable; urgency=low

  * debian/nut.README.Debian: s/smartapc/apcsmart/ (closes: Bug#177713)
  * debian/nut.postinst: chown root:nut instead of chown nut:nut for files
    in /etc/nut/* and for the dirs /etc/nut, /var/run/nut, /var/lib/nut;
    this addresses a potential security issue as described in the comments
    contained in /etc/nut/upsmon.conf (closes: Bug#180059)
  * debian/nut.init: sysadmins might modify POWERDOWNFLAG in
    /etc/nut/upsmon.conf without realizing that it is hard coded in the
    /etc/init.d/nut init script; fix the init script to parse the
    configuration file for the value of POWERDOWNFLAG (closes: Bug#179686)
  * debian/nut.init: print a message prior to shutdown (closes: Bug#180242)

 -- Luca Filipozzi <lfilipoz@debian.org>  Sat,  8 Feb 2003 18:12:11 -0800

nut (1.2.1-1) unstable; urgency=low

  * New upstream release
  * debian/control: nut provides/conflicts ups-monitor (closes: Bug#170655)
  * debian/nut.postinst and debian/nut-cgi.postinst:
        test -f file before chown/chmod (closes: Bug#170553)
  * debian/nut.postinst: fix permissions on /var/lib/nut (closes: Bug#173318)
  * debian/nut.preinst: change how the 'nut' user/group are detected and
    created (closes: Bug#173321)
  * between 1.1.11-1 incorrectly installed conffiles into /etc/nut
    with the extension .sample; fortunately, this release of the package
    did not migrate to testing and since 1.1.11-2 the .sample extension
    has not been used (closes: Bug#172217)
  * debian/nut.preinst: change the way the nut user/group are detected
    before adduser is called (closes: Bug#170653)
  * debian/nut.README.Debian: fixed minor doc error (Closes: Bug#173673)

 -- Luca Filipozzi <lfilipoz@debian.org>  Wed, 11 Dec 2002 19:39:02 -0800

nut (1.2.0-1) unstable; urgency=low

  * New upstream release
  * debian/nut-cgi.postinst: fix permissions on /etc/nut/hosts.conf and
    /etc/nut/upsset.conf so that they are world readable (Closes: Bug#167332)
  * debian/nut.init: added sleep 5 to allow for an orderly restart (thanks
    to Shaul Karl for pointing this out)

 -- Luca Filipozzi <lfilipoz@debian.org>  Tue, 19 Nov 2002 09:44:25 -0800

nut (1.1.12-1) unstable; urgency=high

  * New upstream release (urgency high due to SECURITY FIX)
  * SECURITY FIX: a file permission problem potentially exposes
    non-system usernames/passwords in /etc/nut/upsd.users that can be used
    to DoS a machine running nut by contacting the nut daemon and instructing
    it to power off the machine; fixed.
  * debian/nut.postinst: change permissions of /etc/nut/upsd.users and
    other conffiles to 640 (Closes: Bug#165445)
  * debian/nut.config: use db_fset to reset the boolean question that prompts
    users to accept whether to continue with the installation of this version
    of nut should they answer no (Closes: Bug#165376)
  * debian/control: make nut-cgi Replace nut so that conflicting files
    can be installed (Closes: Bug#165049)
  * drivers/Makefile.in: restored original version that doesn't build
    hidups, snmp-ups or powernet; hidups doesn't build on m68k; snmp-ups
    and powernet require libsnmp5-dev but libsnmp5-dev requires OpenSSL;
    unfortunately, upstream's license doesn't have the OpenSSL exclusion
    clause... work is proceeding on porting to gnutls
  * drivers/Makefile.in + debian/rules: figured out a mechanism to build
    hidups on those architectures that have /usr/include/linux/hiddev.h
  * debian/control: build-depend on libgd-xpm-dev (really closes Bug#164832)

 -- Luca Filipozzi <lfilipoz@debian.org>  Sat, 19 Oct 2002 16:47:35 -0700

nut (1.1.11-2) unstable; urgency=low

  * changed build dependencies to avoid depending on a pure-virtual package
    without providing a default (thanks Junichi Uekawa) (Closes: Bug#164832)
  * debian/rules calls $(MAKE) install-misc so that the header and the .o file
    are released with the nut package (too small for a nut-dev package?)

 -- Luca Filipozzi <lfilipoz@debian.org>  Tue, 15 Oct 2002 08:50:18 -0700

nut (1.1.11-1) unstable; urgency=low

  * New upstream release
    (Closes: Bug#151047, Bug#155943, Bug#153174, Bug#160178, Bug#164024)
  * the "Hey Dorothy, you aren't in Kansas anymore" release
  * warning: significant changes since nut 0.45.5; specifically:
    - upsd listens on a different port (was 3305; now 3493 (IANA-assigned))
    - configuration file formats have changed
    - ups driver internals haved changed: 'common main.c' + upsdrvctl
    - some ups drivers that were not ported to the new common model have
      been dropped by the upstream author (submit a patch to rectify)
    - the init script is significantly simpler
    - the daemons will NOT restart on upgrade from from 0.45.5 or earlier
    - there is an /etc/default/nut file that defines whether the daemons
      will be started
    - removed nut-doc package... far too small to merit being on its own

 -- Luca Filipozzi <lfilipoz@debian.org>  Mon, 14 Oct 2002 13:33:58 -0700

nut (0.45.5-rel-3) unstable; urgency=low

  * "unlink .sock file before starting up; this was keeping the drivers down
    after a system crash where the .sock files remained" -- upstream
    (Closes: Bug#149150, Bug#139859)

 -- Luca Filipozzi <lfilipoz@debian.org>  Fri,  7 Jun 2002 22:34:53 -0700

nut (0.45.5-rel-2) unstable; urgency=low
 
  * debian/control: nut and nut-cgi suggest rather than recommend
    the documentation package, nut-doc (Closes: Bug#144763)
  * debian/nut-cgi.dirs: change absolute paths to relative (Closes: Bug#144746)
  * debian/rules: remove upsdrvctl.8 from package (Closes: Bug#143099)
 
 -- Luca Filipozzi <lfilipoz@debian.org>  Sun,  2 Jun 2002 21:39:14 -0700

nut (0.45.5-rel-1) unstable; urgency=low

  * New upstream release
  * debian/rules: moved model daemons to /lib/nut to reduce chance of
                  namespace conflicts (Closes: Bug#141209)
  * debian/rules: moved sample configuration files to
                  /usr/share/doc/nut/examples (Closes: Bug#140472)
  # debian/postinst: change mode and ownership of files in /etc/nut/ on
                     configure to allow ready by nut/nut (Closes: Bug#142116)

 -- Luca Filipozzi <lfilipoz@debian.org>  Sun, 14 Apr 2002 13:37:13 -0700

nut (0.45.4-rel-3) unstable; urgency=low

  * added runtime dependency on adduser (Closes: Bug#137887) 

 -- Luca Filipozzi <lfilipoz@debian.org>  Sat, 16 Mar 2002 21:41:53 -0800

nut (0.45.4-rel-2) unstable; urgency=low

  * Changed debian/rules to call install-misc which installs the development
    files upsfetch.[oh].  There are too few development files to merit a
    nut-dev package.

 -- Luca Filipozzi <lfilipoz@debian.org>  Sun, 24 Feb 2002 15:47:56 -0800

nut (0.45.4-rel-1) unstable; urgency=low

  * New upstream release

 -- Luca Filipozzi <lfilipoz@debian.org>  Sun, 24 Feb 2002 11:56:46 -0800

nut (0.45.4-pre5-1) unstable; urgency=low

  * New upstream release (Closes: Bug#131673)

 -- Luca Filipozzi <lfilipoz@debian.org>  Sun, 17 Feb 2002 17:31:32 -0800

nut (0.45.1-release-2) unstable; urgency=low

  * applied POWERDOWNFLAG upstream-patch (Closes: Bug#111979)
  * applied apcsmart calibration user-patch (Closes: Bug#111978)
  * modified models/main.c so that it does a forceshutdown *before*
    attempting to chdir into /var/lib/nut (Closes: Bug#112540)

 -- Luca Filipozzi <lfilipoz@debian.org>  Tue, 23 Oct 2001 16:22:57 -0700

nut (0.45.1-release-1) unstable; urgency=low

  * New upstream release
  * Fixed conffile problem with nut-cgi package (Closes: #108687)

 -- Luca Filipozzi <lfilipoz@debian.org>  Sat, 18 Aug 2001 11:58:57 -0700

nut (0.45.1-pre4-1) unstable; urgency=low

  * New upstream release (Closes: #101105)

 -- Luca Filipozzi <lfilipoz@debian.org>  Sun,  5 Aug 2001 13:59:12 -0700

nut (0.44.3-pre6-3) unstable; urgency=low

  * Init script now poweroffs the UPS' correctly. (Closes: #96790) 
  * Changed section of nut-doc to 'doc' (Closes: #94842)
  * Not upgrading to new upstream source (0.45.0) until it is released.
  * Not upgrading to upstream source (0.44.3) since (0.45.0) is coming soon.

 -- Luca Filipozzi <lfilipoz@debian.org>  Sun,  3 Jun 2001 16:05:01 -0700

nut (0.44.3-pre6-2) unstable; urgency=low

  * init script follows policy (Closes: #90346) 

 -- Luca Filipozzi <lfilipoz@debian.org>  Mon, 19 Mar 2001 15:21:44 -0800

nut (0.44.3-pre6-1) unstable; urgency=low

  * New upstream release
  * modified configure.in so that it doesn't produce an error when it tests
    for the existance of group "nut" (Closes: #88126)

 -- Luca Filipozzi <lfilipoz@debian.org>  Sun, 11 Mar 2001 11:48:54 -0800

nut (0.44.3-pre4-1) unstable; urgency=low

  * New upstream release
  * create pidfile modifications reworked to use upstream's writepid() function
  * modified init script to support these changes... note that users MUST
    follow the convention for the UPS directives in the sample upsd.conf;
    a warning has been placed in said file

 -- Luca Filipozzi <lfilipoz@debian.org>  Sun, 25 Feb 2001 19:19:29 -0800

nut (0.44.2-6) unstable; urgency=low

  * modified prerm and postinst so that the daemon(s) is restarted only in the
    postinst rather than stopped in prerm and started later in postinst thereby
    stopping the daemon(s) shortest possible time (Closes: #83614)
  * modified all the daemon(s)' source code so that they create pidfiles
  * modified the init script so that it uses the pidfiles

 -- Luca Filipozzi <lfilipoz@debian.org>  Sun, 11 Feb 2001 18:23:44 -0800

nut (0.44.2-5) unstable; urgency=low

  * removed "function" keyword from init script (Closes: #83569)
  * modified the pre and post scripts so that #DEBHELPER# is at the bottom
  * modified debian/rules so that nut-doc is created (Closes: #85059)
  * added support for MGE UPS (thanks to Ryan Murray) (Closes: #83743)

 -- Luca Filipozzi <lfilipoz@debian.org>  Sat, 10 Feb 2001 20:09:35 -0800

nut (0.44.2-4) unstable; urgency=low

  * control file changed such that arch=any for nut-doc (Closes: #83323)

 -- Luca Filipozzi <lfilipoz@debian.org>  Tue, 23 Jan 2001 17:49:25 -0800

nut (0.44.2-3) unstable; urgency=low

  * Added a build conflict against libgd-gif1-dev because it provides
    libgd-dev but does not have PNG support. (Closes: #82607)
  * Fixed a path problem in debian/rules that had manpages installing 
    in /share/man/man8 instead of /usr/share/man/man8.

 -- Luca Filipozzi <lfilipoz@debian.org>  Wed, 17 Jan 2001 19:11:56 -0800

nut (0.44.2-2) unstable; urgency=low

  * Modified README.Debian to address bad doc path (Closes: #82460) 
  * Slight improvements to README.Debian, as well.

 -- Luca Filipozzi <lfilipoz@debian.org>  Mon, 15 Jan 2001 21:11:39 -0800

nut (0.44.2-1) unstable; urgency=low

  * New upstream release

 -- Luca Filipozzi <lfilipoz@emyr.net>  Tue,  9 Jan 2001 08:33:56 -0800

nut (0.44.1-4) unstable; urgency=low

  * fixed path problem with cgi files; they *are* in /usr/lib/cgi-bin/nut now 

 -- Luca Filipozzi <lfilipoz@emyr.net>  Wed, 22 Nov 2000 08:47:54 -0800

nut (0.44.1-3) unstable; urgency=low

  * the following changes suggested by Patrik Rak (Closes: #77144, #77195)
    * added better preinst(install) checks for group membership
    * modified upstream upsd.conf to use correct paths in the UPS directives
    * modified upstream upsd.conf to have better ACCESS directive examples
    * modified upstream upsmon.conf to have better MONITOR directive examples
    * modified upstream upsmon.conf to use a different POWERDOWNFLAG location
      (location must be on the root filesystem... otherwise powerdownflag is
       not found!)
    * modified init script to parse upsmon.conf for the POWERDOWNFLAG location
    * modified init script's poweroff section so that all args are recognized
    * improved the documentation, primarily README.Debian
  * installation scripts modified so that the dependency on adduser >= 3.14
    can be removed; this allows for the creation of potato packages
  * the nut user is no longer part of the dialout group; users will have to
    manually change the permissions on the serial port devices;
    a nut group is created at the same time as the nut user; users should use
    the nut group for the serial port permissions: chown root.nut /dev/ttyS0
    (suggested by Shaul Karl and Patrik Rak)
  * the cgi scripts are moved to /usr/lib/cgi-bin/nut/*
    (suggested by Shaul Karl)
  * init script changed significantly to address argument passing problems
    (reported by Shaul Karl)

 -- Luca Filipozzi <lfilipoz@emyr.net>  Thu, 16 Nov 2000 11:42:42 -0800

nut (0.44.1-2) unstable; urgency=low

  * removed else clause on detection of existing "nut" user (Closes: #76721) 
    "install" creates the user nut; "remove" doesn't remove it, "purge" does;
    a re-"install" would find an existing "nut" user and exit on error; fixed
  * fixed a possible bashism (Closes: #72711)

 -- Luca Filipozzi <lfilipoz@emyr.net>  Fri, 10 Nov 2000 10:06:05 -0800

nut (0.44.1-1) unstable; urgency=low

  * New upstream release
  * serious repurcussion to existing users of nut... the configuration files
    have changed somewhat... a critical debconf warning informs the user of
    this fact
  * binaries are to remains in /sbin (Closes: #69525)
  * init script no longer relies on /usr being mounted (Closes: #70033)
  * 

 -- Luca Filipozzi <lfilipoz@emyr.net>  Fri, 10 Nov 2000 10:05:55 -0800

nut (0.44.0-4) unstable; urgency=low

  * Moved man pages from section 1 to section 8. (Closes: #68819)
  * nut-doc suggest rather than recommends nut and nut-cgi. (Closes: #69400)

 -- Luca Filipozzi <lfilipoz@emyr.net>  Fri, 18 Aug 2000 23:15:18 -0700

nut (0.44.0-3) unstable; urgency=low

  * Minor fixes to packaging scripts (Closes: #67649).
  * Created new doc package: nut-doc.

 -- Luca Filipozzi <lfilipoz@emyr.net>  Mon, 24 Jul 2000 10:18:19 -0700

nut (0.44.0-2) unstable; urgency=low

  * Minor fixes to init script and to list of undocumented binaries. 

 -- Luca Filipozzi <lfilipoz@emyr.net>  Sat, 22 Jul 2000 19:11:42 -0700

nut (0.44.0-1) unstable; urgency=low

  * New upstream release

 -- Luca Filipozzi <lfilipoz@emyr.net>  Thu, 20 Jul 2000 09:26:04 -0700

nut (0.43.2-2) unstable; urgency=low

  * fixes: Bug#67316: nut: default permissions could reveal passwords
    Files in /etc/nut are now 600 by default.
  * fixes: Bug#67314: nut: uses old FHS directory /var/state 
    Now uses /var/lib as per FHS guidelines.
  * fixes: Bug#66988: nut_0.43.2-1(unstable): Missing build dependencies
    Added debhelper to the build dependencies.

 -- Luca Filipozzi <lfilipoz@emyr.net>  Tue, 18 Jul 2000 14:55:03 -0700

nut (0.43.2-1) unstable; urgency=low

  * Initial Release.
  * Modification to upstream source: configure.in, common/common.c,
    and models/upscommon.c changed to support different configuration
    options... --with-user and --with-group which accept a username
    and a groupname (rather than a uid/gid as before).
  * Modification to upstream source: /var/state/nut is used instead
    of /var/state/ups in conf/upsd.conf.

 -- Luca Filipozzi <lfilipoz@emyr.net>  Wed,  3 May 2000 20:50:30 -0700

Local variables:
mode: debian-changelog
End:
